<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>Valgsimulator</title>
	<link rel="stylesheet" href="style.css">
	<script type="text/javascript" src="defaults.js"></script>
	<script type="text/javascript" src="data2009.js"></script>
	<script type="text/javascript" src="data2013.js"></script>
	<script type="text/javascript" src="data2017.js"></script>
	<script type="text/javascript" src="data2021.js"></script>
	<script type="text/javascript" src="data2025.js"></script>
	<script type="text/javascript" src="valg.js" defer></script>
</head>
<body>
	<header>
		<h1>Valgsimulator 🗳️🇳🇴</h1>
		<p style="margin: 0.5rem 0">Hvordan påvirkes <a href="https://valgresultat.no">resultatet av Stortingsvalget</a> av endringer i <a href="https://lovdata.no/dokument/NL/lov/2023-06-16-62">valgsystemet</a>? <a href="https://github.com/hersle/valgsimulator">Åpen kildekode</a>.</p>
	</header>
	<article>
		<section>
		<fieldset>
			<span title="Bruk offisielle stemmetall fra dette Stortingsvalget. Fremtidige valg merket * bruker i stedet meningsmålinger fra pollofpolls.no, og relative oppslutninger regnes om til absolutte stemmetall ved å anta at andelen hjemmesittere av de stemmeberettigede i hvert valgdistrikt er den samme som i forrige valg." >
				<label for="election">Valg</label>
				<select id="election" oninput="setElection();">
					<option>2009</option>
					<option>2013</option>
					<option>2017</option>
					<option selected>2021</option>
					<option>2025*</option>
				</select>
				<a>ⓘ</a>
			</span>
			<span title="Antall distrikts- og utjevningsmandater som skal velges til Stortinget til sammen. Siden 2005 velges 169 mandater.">
				<label for="totalseats">Mandater</label>
				<input type="number" id="totalseats" value="169" min="0" step="1" oninput="update();" size="2"/>
				<a>ⓘ</a>
			</span>
			<span title="Relativ vekt mellom én kvadratkilometer og én innbygger i fordelingen av antall Stortingsmandater mellom valgdistriktene. Antall Stortingsmandater fordeles mellom distriktene med Saint-Laguës rene metode (fra 1,0). Fordelingen tar utgangspunkt i tallet &quot;folketall + arealfaktor × areal/km²&quot; for hvert valgdistrikt. Sett til 0 for å fordele mandater kun etter innbyggertall. Siden 2005 er arealfaktoren 1,8.">
				<label for="areafactor">Arealfaktor</label>
				<input type="number" id="areafactor" value="1.8" min="0" step="0.1" oninput="update();" size="2"/>
				<a>ⓘ</a>
			</span>
			<span title="Om et valgdistrikt tildeles færre mandater enn dette, vil et minimum antall plasser likevel reserveres for distriktet, og fordelingen av de gjenværende mandatene gjentas for de gjenværende distriktene inntil alle har fått minst dette antallet mandater. Endret fra 0 til 4 i 2025.">
				<label for="minlocalseats">Minimum mandater per distrikt</label>
				<input type="number" id="minlocalseats" value="0" min="0" step="1" oninput="update();" size="1"/>
				<a>ⓘ</a>
			</span>
			<span title="Antall mandater som omgjøres til utjevningsmandater fra hvert valgdistrikt etter at det samlede antallet Stortingsmandater er fordelt mellom valgdistriktene. Siden 2005 er det 1 utjevningsmandat per valgdistrikt.">
				<label for="globalseatsperdistrict">Utjevningsmandater per distrikt</label>
				<input type="number" id="globalseatsperdistrict" value="1" min="0" step="1" oninput="update();" size="1"/>
				<a>ⓘ</a>
			</span>
			<span title="Minste andel stemmer som et parti må få i et distrikt for å tildeles mandater der. I dag er det ingen slik grense.">
				<label for="localthreshold">Lokal sperregrense</label>
				<input type="number" id="localthreshold" value="0" min="0" max="100" step="0.1" oninput="update();" size="1"/>
				<label for="localthreshold">%</label>
				<a>ⓘ</a>
			</span>
			<span title="Minste andel stemmer som et parti må få nasjonalt for å tildeles utjevningsmandater. Siden 1989 er grensen 4 %.">
				<label for="globalthreshold">Nasjonal sperregrense</label>
				<input type="number" id="globalthreshold" value="4" min="0" max="100" step="0.1" oninput="update();" size="1"/>
				<label for="globalthreshold">%</label>
				<a>ⓘ</a>
			</span>
			<span title="I utgangspunktet gjelder den nasjonale sperregrensen kun utjevningsmandater. Dette alternativet gjør at partiet som ikke når den nasjonale sperregrensen heller ikke tildeles distriktsmandater.">
				<input type="checkbox" id="localglobalthreshold" oninput="update();"/>
				<label for="localglobalthreshold">Nasjonal sperregrense gjelder både distrikt- og utjevningsmandater</label>
				<a>ⓘ</a>
			</span>
			<span title="I utgangspunktet beregnes antall utjevningsmandater for hvert parti som forskjellen mellom antall mandater de får i en nasjonal fordeling av alle Stortingsmandatene og antallet distriktsmandater de har fått. Denne differansen kan godt være negativ. Etter dagens regler skal i så fall partiet likevel få beholde alle sine distriktsmandater, og det gjøres en ny beregning av utjevningsmandater uten dette partiets stemmer og mandater. Dette alternativet tillater i stedet et negativt antall utjevningsmandater, som i praksis innebærer at partiet må gi fra seg noen distriktsmandater. Dette er tilfellet i Sverige.">
				<input type="checkbox" id="negativeglobalseats" oninput="update();"/>
				<label for="negativeglobalseats">Tillat negative utjevningsmandater</label>
				<a>ⓘ</a>
			</span>
			<span title="La partier under sperregrensen likevel tildeles utjevningsmandater om de allerede har distriktsmandater. Dagens regler håndhever alltid sperregrensen.">
				<input type="checkbox" id="exemptglobalthreshold" oninput="update();"/>
				<label for="exemptglobalthreshold">Unnta partier med distriktsmandater fra sperregrensen for utjevningsmandater</label>
				<a>ⓘ</a>
			</span>
			<span title="Hold partier som ikke stiller til valg i alle valgdistrikter utenfor fordelingen av utjevningsmandater. Deltakelse i alle distrikter ble et krav i 2025.">
				<input type="checkbox" id="requireglobalrepresentation" oninput="update();"/>
				<label for="requireglobalrepresentation">Krev deltakelse i alle distrikter for utjevningsmandater</label>
				<a>ⓘ</a>
			</span>
			<span title="I hvert distrikt fordeles distrikts- og utjevningsmandater mellom partiene med en gitt metode. Én og én mandat tildeles partiet med størst poengsum inntil alle mandatene er oppbrukt. Sainte-Laguë gir poengsum v/(2s+1), der v er partiets stemmer og s er antall mandater de allerede har fått i distriktet. I modifisert versjon endres første deletall (når s = 0) fra 1 til 1,2 eller 1,4. D'Hondt gir poengsum v/(s+1). Hare/Hamilton gir poengsum v/V*S-s, hvor V og S er totalt antall stemmer og mandater i distriktet. Vinneren tar alt gir alle mandatene til partiet med flest stemmer. Endret fra D'Hondt til Sainte-Laguë (med første delingstall modifisert til 1,4) i 1953.">
				<label for="method">Fordelingsmetode</label>
				<select id="method" oninput="update();">
					<option>Sainte-Laguë fra 1,4</option>
					<option>Sainte-Laguë fra 1,2</option>
					<option>Sainte-Laguë fra 1,0</option>
					<option>D’Hondt</option>
					<option>Hare/Hamilton</option>
					<option>Vinneren tar alt</option>
				</select>
				<a>ⓘ</a>
			</span>
			<span title="Slå sammen innbyggertall, areal og stemmer for noen valgdistrikter. 19 fylker svarer nøyaktig til dagens valgdistrikter og innebærer ingen sammenslåing. 18 fylker slår Nord- og Sør-Trøndelag sammen til Trøndelag. 15 fylker slår også sammen Hordaland og Sogn og Fjordane til Vestland, Vest- og Øst-Agder til Agder og Oppland og Hedmark til Innlandet. 11 fylker slår også sammen Troms og Finnmark, Vestfold og Telemark, og Østfold, Akershus og Buskerud til Viken. Ett valgdistrikt slår alle distriktene sammen til ett nasjonalt valgdistrikt.">
				<label for="mergedistricts">Samle distrikter til</label>
				<select id="mergedistricts" oninput="update();">
					<option selected>19 fylker (før 2018)</option>
					<option>18 fylker (før 2020)</option>
					<option>15 fylker (etter 2024)</option>
					<option>11 fylker (før 2024)</option>
					<option>1 valgdistrikt</option>
				</select>
				<a>ⓘ</a>
			</span>
			<span title="Gi et gitt antall ekstra stemmer til et gitt parti i et gitt valgdistrikt. Bruk et negativt tall for å fjerne stemmer. Prøv deg fram for å finne vippepunkt som utgjør forskjellen mellom ett mandat eller får partiet over sperregrensen, for eksempel.">
				<label for="extravotes">Gi</label>
				<input type="number" id="extravotes" value="0" step="1" size="5" oninput="update();"/>
				<label for="extraparty">ekstra stemmer til</label>
				<select id="extraparty" oninput="update();"></select>
				<label for="extradistrict">i</label>
				<select id="extradistrict" oninput="update();"></select>
				<a>ⓘ</a>
			</span>
			<span title="Påvirker ikke valgresultatet.">
				<label for="sortparties">Sortér partier etter</label>
				<select id="sortparties" oninput="update();">
					<option>Navn</option>
					<option selected>Stemmer</option>
					<option>Mandater</option>
					<option>Farge (subjektivt)</option>
				</select>
				<a>ⓘ</a>
			</span>
			<span title="Påvirker ikke valgresultatet.">
				<label for="sortdistricts">Sortér valgdistikter etter</label>
				<select id="sortdistricts" oninput="update();">
					<option>Navn</option>
					<option>Stemmer</option>
					<option>Mandater</option>
					<option>Innbyggertall</option>
					<option>Areal</option>
				</select>
				<a>ⓘ</a>
			</span>
			<span title="Vis prosentandelen stemmer og mandater i stedet for antallet. Andeler rundes mot null, slik at avrundingsfeil ikke kan gi inntrykk av at partier nærme sperregrensen er over sperregrensen. Påvirker ikke valgresultatet.">
				<input type="checkbox" id="showfraction" oninput="update();"/>
				<label for="showfraction">Vis andeler med</label>
				<input type="number" id="decimals" value="1" min="0" max="9" step="1" oninput="update();" size="1"/>
				<label for="decimals">desimaler</label>
				<a>ⓘ</a>
			</span>
			<span title="Vis alle partier som ikke har fått noen mandater som ett parti med navnet ANDRE. Påvirker ikke valgresultatet.">
				<input type="checkbox" id="groupotherparties" oninput="update();"/>
				<label for="groupotherparties">Vis partier uten mandater som <strong>ANDRE</strong></label>
				<a>ⓘ</a>
			</span>
			<!--
			<span title="Vis bare samlet antall distriktsstemmer eller -mandater.">
				<input type="checkbox" id="grouplocal" oninput="update();"/>
				<label for="grouplocal">Samle distrikter</label>
			</span>
			-->
			<span title="Liste over hvilke partier som kan inngå i koalisjon med hverandre. Vennlige partier separeres med pluss(+), og flere slike lister separeres med komma (,). Feltet blir rødt når det er ugyldig formatert. Påvirker ikke valgresultatet.">
				<label for="friends">Samarbeidspartier</legend>
				<input type="text" id="friends" value="A+SP+SV, SV+MDG, H+FRP+V+KRF" oninput="update();" size="30"/>
				<a>ⓘ</a>
			</span>
		</fieldset>
		</section>
		<h2 class="scroll" style="padding: 0.5rem 0.5rem">
			<a id="distslink" onclick="showTab('dists');" style="margin-right: 0.3em">Distrikter</a>
			<a id="voteslink" onclick="showTab('votes');" style="margin-right: 0.3em">Stemmer</a>
			<a id="seatslink" onclick="showTab('seats');" style="margin-right: 0.3em">Mandater</a>
			<a id="teamslink" onclick="showTab('teams');" style="margin-right: 0.3em">Partier</a>
			<a id="calcslink" onclick="showTab('calcs');">Beregning</a>
		</h2>
		<div id="votestab">
			<div class="scroll">
				<table id="votes">
					<thead></thead>
					<tbody></tbody>
					<tfoot></tfoot>
				</table>
			</div>
			<section>
			<p>Tabellen viser antall stemmer som hvert parti har fått i hvert valgdistrikt. En tom celle betyr at partiet ikke stilte til valg i distriktet.</p>
			</section>
		</div>
		<div id="seatstab">
			<div class="scroll">
				<table id="seats">
					<thead></thead>
					<tbody></tbody>
					<tfoot></tfoot>
				</table>
			</div>
			<section>
			<p>Tabellen viser antall mandater som er tildelt hvert parti i hvert valgdistrikt. En tom celle betyr at partiet ikke stilte til valg i distriktet eller ikke oppfyller kriteriene for å tildeles mandater der (f.eks. under sperregrensen). Merk at utjevningsmandatene er skilt fra valgdistriktene.</p>
			</section>
		</div>
		<div id="teamstab">
			<div class="scroll">
				<table id="teams">
					<thead></thead>
					<tbody></tbody>
				</table>
			</div>
			<section>
			<p>Tabellen viser alle enkeltpartier og mulige koalisjoner av samarbeidsvillige partier, antall mandater som er innenfor (i posisjon) og utenfor (i opposisjon) koalisjonen, forskjellen mellom koalisjonens andel mandater og nasjonale stemmer, og gjennomsnittlig antall stemmer per mandat.</p>
			</section>
		</div>
		<div id="diststab">
			<div class="scroll">
				<table id="dists">
					<thead></thead>
					<tbody></tbody>
				</table>
			</div>
			<section>
			<p>Tabellen viser folketall, areal og resulterende fordelingstall for hvert valgdistrikt, samt antall mandater og forskjellen mellom andelen mandater og innbyggere relativt til hele landet.</p>
			</section>
		</div>
		<div id="calcstab">
			<section>
				<textarea id="log" rows="25" wrap="off" readonly></textarea>
				<p>Loggen forklarer alle stegene i beregningen av valgresultatet.</p>
			</section>
			<div class="scroll">
				<table id="stats">
					<thead></thead>
					<tbody></tbody>
				</table>
			</div>
			<section>
			<p>Tabellen viser størrelser som måler proporsjonaliteten til hele valget, som <a href="https://en.wikipedia.org/wiki/Gallagher_index">Gallaghers disproporsjonalitetsindeks (LSq)</a> og <a href="https://en.wikipedia.org/wiki/Loosemore%E2%80%93Hanby_index">Loosemore-Hanbys disproporsjonalitetsindeks (LH)</a>.</p>
			</section>
		</div>
		<section>
		<h2>Tips</h2>
		<ul>
			<li>Endring av valgår nullstiller alle alternativer til årets valglov.</li>
			<li>Bruk piltastene for å gradvis endre verdien til valg alternativ.</li>
			<li>Trykk på ⓘ eller hold musen over alternativer for å vise forklaringer og flere tips.</li>
			<li>Endringer trer i kraft umiddelbart.</li>
		</ul>
		<h2>Kilder og nyttige lenker</h2>
		<ul>
			<li><a href="https://valgresultat.no/valg/2021/">Offisielle stemmetall og valgresultater (2009–)</a></li>
			<li><a href="https://lovdata.no/dokument/NL/lov/2023-06-16-62">Valgloven (2024–)</a></li>
			<li><a href="https://lovdata.no/dokument/NLO/lov/2002-06-28-57">Valgloven (2002–2024)</a></li>
			<li><a href="https://lovdata.no/dokument/NLO/lov/1985-03-01-3">Valgloven (1985–2002)</a></li>
			<li><a href="https://no.wikipedia.org/wiki/Historisk_mandatfordeling_på_fylker_ved_stortingsvalg">Uoffisielle innbyggertall og areal for valgdistriktene (–2017)</a></li>
			<li><a href="https://www.regjeringen.no/no/dokumentarkiv/regjeringen-solberg/aktuelt-regjeringen-solberg/kmd/pressemeldinger/2020/fordeling-av-mandatene-ved-neste-stortingsvalg/id2699589/">Offisielle innbyggertall og areal for valgdistriktene (2021)</a></li>
			<li><a href="https://www.regjeringen.no/no/aktuelt/fordeling-av-mandatene-for-stortingsvalget-i-2025/id3040582/">Offisielle innbyggertall og areal for valgdistriktene (2025)</a></li>

			<li><a href="https://www.regjeringen.no/no/dokumenter/nou-2020-6/id2703131/">Utredning om ny valglov (NOU 2020: 6)</a></li>
			<li><a href="https://lavinia.no/">Lavinia valgsimulator</a></li>
			<li><a href="https://www.vg.no/spesial/2017/stortingsvalg/">VGs valgsimulator</a></li>
			<li><a href="https://github.com/JanOleA/stlague">Jan Ole Åkerholms valgsimulator</a></li>
			<li><a href="https://www.pollofpolls.no">Poll of polls</a> (* brukes for 2025-data med antatt lik andel hjemmesittere som i 2021 i hvert distrikt)</li>
		</ul>
		</section>
	</article>
	<footer>
		<p style="margin: 0.5rem 0;">Utviklet av Herman Sletmoen. <a href="https://github.com/hersle/valgsimulator">Åpen kildekode</a>. <a href="https://github.com/hersle/valgsimulator/issues">Meld inn forslag, feil og problemer!</a></p>
	</footer>
</body>
</html>
